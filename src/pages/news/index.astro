---
// コンポーネント
import PageLayout from "../../layouts/PageLayout.astro";
import PageBottomWave from "../../components/common/PageBottomWave.astro";
import Breadcrumb from "../../components/common/Breadcrumb.astro";

// データとタイプ
import newsData from "../../data/news.json";
import type { NewsData, NewsArticle, NewsCategory } from "../../types/news.ts";

// データの型変換
const typedNewsData = newsData as NewsData;
const articles = typedNewsData.articles;
const categories = typedNewsData.categories;
---

<PageLayout title="お知らせ一覧 ｜コッコ祭り 2025｜KOKKO Festival">
  <!-- news list content -->
  <section class="page-wrapper news-list">
    <div class="news-list__container">
      <header class="news-list__header">
        <h1 class="news-list__title">
          <span class="news-list__title-accent">お</span>
          知らせ
        </h1>
        <p class="news-list__subtitle">− NEWS −</p>
      </header>
      <nav class="news-filter">
        <div class="news-filter__wrapper">
          <button class="news-filter__item news-filter__item--active">
            <span>すべて</span>
          </button>
          {categories.map((category) => (
            <button class="news-filter__item">
              <span>{category.name}</span>
            </button>
          ))}
        </div>
      </nav>
      <main class="news-articles">
        <ul class="news-articles__list">
          {articles.map((article) => {
            const category = categories.find(c => c.id === article.category);
            return (
              <li class="news-articles__item">
                <article class="news-article-card">
                  <a href={`/news/${article.slug}/`} class="news-article-card__link">
                    <header class="news-article-card__header">
                      <time class="news-article-card__date" datetime={article.publishedAt}>
                        {article.publishedAt}
                      </time>
                      <div class="news-article-card__category">
                        <span>{category ? category.name : article.category}</span>
                      </div>
                    </header>
                    <h3 class="news-article-card__title">
                      {article.title}
                    </h3>
                  </a>
                </article>
              </li>
            );
          })}
        </ul>
      </main>
      <nav class="news-pagination" aria-label="ページネーション">
        <button class="news-pagination__item news-pagination__item--prev"
          ><span class="news-pagination__text">＜</span></button
        >
        <button class="news-pagination__item news-pagination__item--current"
          ><span class="news-pagination__text">1</span></button
        >
        <button class="news-pagination__item"
          ><span class="news-pagination__text">2</span></button
        >
        <button class="news-pagination__item"
          ><span class="news-pagination__text">3</span></button
        >
        <button class="news-pagination__item"
          ><span class="news-pagination__text">4</span></button
        >
        <button class="news-pagination__item"
          ><span class="news-pagination__text">5</span></button
        >
        <button class="news-pagination__item news-pagination__item--next"
          ><span class="news-pagination__text">＞</span></button
        >
      </nav>
      <!-- ここにお知らせ一覧のマークアップを追加 -->
    </div>
    <Breadcrumb currentPageTitle="お知らせ" />
    <PageBottomWave />
  </section>
</PageLayout>

<script>
  // お知らせ一覧ページのJavaScript
  document.addEventListener("DOMContentLoaded", () => {
    // フィルター機能やページネーション機能をここに追加
  });
</script>

<style lang="scss">
  @import "../../styles/variables";
  @import "../../styles/functions";
  @import "../../styles/mixins";

  .news-list {
    padding-top: spx(296);
    position: relative;
    min-height: 90vh;
    padding-bottom: spx(99);
    @include tablet-up {
      padding-top: ppx(253 * 1.2);
      padding-bottom: ppx(228 * 1.2);
    }
    @include desktop-up {
      padding-top: ppx(253);
      padding-bottom: ppx(228);
    }

    &__container {
      padding-bottom: spx(100);
      @include tablet-up {
        padding-bottom: ppx(130 * 1.2);
      }
      @include desktop-up {
        padding-bottom: ppx(130);
      }
    }

    &__header {
      @include tablet-up {
      }
      @include desktop-up {
      }
    }

    &__title {
      color: var(--base_5, #102a4d);
      font-size: spx(60);
      font-style: normal;
      font-weight: 700;
      line-height: 130%;
      text-align: center;
      @include tablet-up {
        font-size: ppx(110 * 1.2);
      }
      @include desktop-up {
        font-size: ppx(110);
      }

      &-accent {
        color: var(--logo_color_3, #c99e2d);
        @include tablet-up {
        }
        @include desktop-up {
        }
      }
    }

    &__subtitle {
      color: var(--base_5, #102a4d);
      text-align: center;
      font-size: spx(26);
      font-style: normal;
      font-weight: 700;
      line-height: 180%;
      @include tablet-up {
        font-size: ppx(37 * 1.2);
      }
      @include desktop-up {
        font-size: ppx(37);
      }
    }
  }

  .news-filter {
    display: flex;
    width: spx(680);
    padding: spx(40) spx(30);
    justify-content: center;
    align-items: flex-start;
    align-content: flex-start;
    gap: spx(10);
    flex-wrap: wrap;
    border-radius: spx(30);
    background: var(--base_2, #fcf2c9);
    margin-inline: auto;
    margin-top: spx(60);
    @include tablet-up {
      padding: ppx(40 * 1.2) ppx(85 * 1.2);
      gap: ppx(20 * 1.2);
      border-radius: ppx(30 * 1.2);
      width: ppx(1350 * 1.2);
      margin-top: ppx(91 * 1.2);
    }
    @include desktop-up {
      padding: ppx(40) ppx(85);
      gap: ppx(20);
      border-radius: ppx(30);
      width: ppx(1350);
      margin-top: ppx(91);
    }

    &__wrapper {
      display: flex;
      flex-wrap: wrap;
      gap: spx(10);
      justify-content: center;
      margin: 0 auto;
      width: 100%;
      @include tablet-up {
        gap: ppx(20 * 1.2);
      }
      @include desktop-up {
        gap: ppx(20);
      }
    }

    &__item {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: spx(10);
      border-radius: spx(15);
      width: spx(200);
      border: 2px solid var(--logo_color_3, #c99e2d);
      background: var(--base_1, #fffcf2);
      @include tablet-up {
        gap: ppx(10 * 1.2);
        border-radius: ppx(15 * 1.2);
        width: ppx(220 * 1.2);
      }
      @include desktop-up {
        gap: ppx(10);
        border-radius: ppx(15);
        width: ppx(220);
      }
      span {
        color: var(--logo_color_3, #c99e2d);
        text-align: center;
        font-size: spx(24);
        font-weight: 700;
        line-height: 180%;
        @include tablet-up {
          font-size: ppx(28 * 1.2);
        }
        @include desktop-up {
          font-size: ppx(28);
        }
      }

      &--active {
        background: var(--logo_color_3, #c99e2d);
        @include tablet-up {
        }
        @include desktop-up {
        }
        span {
          color: var(--base_1, #fffcf2);
        }
      }
    }
  }

  .news-articles {
    margin-top: spx(80);
    @include tablet-up {
      margin-top: ppx(130 * 1.2);
    }
    @include desktop-up {
      margin-top: ppx(130);
    }

    &__list {
      display: flex;
      flex-direction: column;
      gap: spx(20);
      width: spx(560);
      margin-inline: auto;
      @include tablet-up {
        gap: ppx(50 * 1.2);
        width: ppx(1350 * 1.2);
      }
      @include desktop-up {
        gap: ppx(50);
        width: ppx(1350);
      }
    }

    &__item {
      @include tablet-up {
      }
      @include desktop-up {
      }
      &:after {
        content: "";
        display: block;
        background: linear-gradient(
            to right,
            #102a4d,
            #102a4d 25%,
            rgba(0, 0, 0, 0) 25%,
            rgba(0, 0, 0, 0) 100%
          )
          0% 0%;
        background-size: 4px 1px;
        width: 100%;
        height: 1px;
        margin-left: auto;
        margin-right: auto;
        margin-top: spx(18);
        @include tablet-up {
          margin-top: ppx(30 * 1.2);
        }
        @include desktop-up {
          margin-top: ppx(30);
        }
      }
    }
  }

  .news-article-card {
    @include tablet-up {
      padding-left: ppx(20 * 1.2);
    }
    @include desktop-up {
      padding-left: ppx(20);
    }

    &__link {
      display: flex;
      flex-flow: column;
      gap: spx(8);
      @include tablet-up {
        flex-flow: row;
        gap: ppx(30 * 1.2);
        align-items: baseline;
      }
      @include desktop-up {
        gap: ppx(30);
      }
    }

    &__header {
      display: flex;
      align-items: center;
      gap: spx(15);
      @include tablet-up {
        gap: ppx(30 * 1.2);
      }
      @include desktop-up {
        gap: ppx(30);
      }
    }

    &__date {
      color: var(--base_5, #102a4d);
      font-size: spx(30);
      font-weight: 700;
      line-height: 180%;
      @include tablet-up {
        font-size: ppx(30 * 1.2);
      }
      @include desktop-up {
        font-size: ppx(30);
      }
    }

    &__category {
      display: flex;
      padding-bottom: spx(4);
      justify-content: center;
      align-items: center;
      gap: spx(10);
      border-radius: spx(15);
      background: var(--logo_color_3, #c99e2d);
      width: spx(220);
      @include tablet-up {
        padding-bottom: ppx(4 * 1.2);
        gap: ppx(10 * 1.2);
        border-radius: ppx(15 * 1.2);
        width: ppx(220 * 1.2);
      }
      @include desktop-up {
        padding-bottom: ppx(4);
        gap: ppx(10);
        border-radius: ppx(15);
        width: ppx(220);
      }
      span {
        color: var(--base_1, #fffcf2);
        text-align: center;
        font-size: spx(26);
        font-weight: 700;
        line-height: 180%;
        @include tablet-up {
          font-size: ppx(28 * 1.2);
        }
        @include desktop-up {
          font-size: ppx(28);
        }
      }
    }

    &__title {
      color: var(--base_5, #102a4d);
      font-size: spx(26);
      font-style: normal;
      font-weight: 700;
      line-height: 160%;
      @include tablet-up {
        font-size: ppx(30 * 1.2);
      }
      @include desktop-up {
        font-size: ppx(30);
      }
    }
  }

  .news-pagination {
    margin-top: spx(40);
    width: spx(568);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: spx(13);
    margin-inline: auto;
    position: relative;
    @include tablet-up {
      margin-top: ppx(90 * 1.2);
      width: ppx(750 * 1.2);
      gap: ppx(20 * 1.2);
    }
    @include desktop-up {
      margin-top: ppx(90);
      width: ppx(750);
      gap: ppx(20);
    }

    &__item {
      display: flex;
      width: spx(70);
      height: spx(70);
      padding: spx(10);
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: spx(10);
      flex-shrink: 0;
      aspect-ratio: 1/1;
      border-radius: spx(15);
      background: var(--white, #fff);
      @include tablet-up {
        width: ppx(90 * 1.2);
        height: ppx(90 * 1.2);
        padding: ppx(10 * 1.2);
        gap: ppx(10 * 1.2);
        border-radius: ppx(15 * 1.2);
      }
      @include desktop-up {
        width: ppx(90);
        height: ppx(90);
        padding: ppx(10);
        gap: ppx(10);
        border-radius: ppx(15);
      }

      &--prev {
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        @include tablet-up {
        }
        @include desktop-up {
        }
      }

      &--current {
        background: var(--base_6, #56b877);

        @include tablet-up {
        }
        @include desktop-up {
        }
        .news-pagination__text {
          color: white;
        }
      }

      &--next {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        @include tablet-up {
        }
        @include desktop-up {
        }
      }
    }

    &__text {
      color: var(--base_5, #102a4d);
      text-align: center;
      font-size: spx(26);
      font-weight: 700;
      line-height: 160%;
      @include tablet-up {
        font-size: ppx(33 * 1.2);
      }
      @include desktop-up {
        font-size: ppx(33);
      }
    }
  }
</style>
